function EventQueue(){"use strict";this.id=(16*(new Date).getTime()*Math.random()).toString(16),this._queue=[],this._events=[],this._completedEvents=[],this._hasBuilt=!1,this._callback=function(){},this._targetCount=0}EventQueue.prototype.queueEvent=function(t,e){"use strict";if(void 0!==e)for(var s=0;e>s;s++)this._queue.push(t);else this._queue.push(t);return this},EventQueue.prototype.addCallback=function(t){"use strict";return this._callback=t,this},EventQueue.prototype.isComplete=function(){"use strict";return 0===this._queue.length&&0===this._events&&this._completedEvents.length===this._targetCount},EventQueue.prototype.reset=function(){"use strict";return this._queue=[],this._events=[],this._completedEvents=[],this._hasBuilt=!1,this._targetCount=0,this._destroyListeners(),this._callback=function(){},this},EventQueue.prototype.triggerEvent=function(t){"use strict";if(this._hasBuilt)if(-1!==this._events.indexOf(t)){var e=new CustomEvent(this.id,{detail:{name:t}});document.dispatchEvent(e)}else this._failure('No events found with name "'+t+'"');else this._failure("No event listeners created. Execute build() first.");return this},EventQueue.prototype.build=function(){"use strict";if(!this._hasBuilt&&this._queue.length>0){this._targetCount=this._queue.length;for(var t=0;t<this._targetCount;t++)this._events.push(this._queue[t]);this._queue=[],this._buildListeners(),this._hasBuilt=!0}else this._failure(this._hasBuilt||0!==this._queue.length?"Queue already built, cannot build again. Use reset() to start over with the same instance.":"You need to queue events first, use queueEvent(name, count) to add events to the queue first.");return this},EventQueue.prototype._buildListeners=function(){"use strict";var t=this;return document.addEventListener(this.id.toString(),function(e){t._pollProgress(e)}),this},EventQueue.prototype._pollProgress=function(t){"use strict";var e=this._events.indexOf(t.detail.name);this._events.splice(e,1),this._completedEvents.push(t.detail.name),this._completedEvents.length===this._targetCount&&this._success()},EventQueue.prototype._destroyListeners=function(){"use strict";return document.removeEventListener(this.id),this},EventQueue.prototype._success=function(){"use strict";return this._destroyListeners(),this._callback(),this.reset(),this},EventQueue.prototype._failure=function(t){"use strict";throw this._destroyListeners(),new Error("[EventQueue FAILURE]: "+t)},"object"==typeof module&&(module.exports=EventQueue);